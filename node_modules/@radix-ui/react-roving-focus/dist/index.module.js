import{useControllableState as e}from"@radix-ui/react-use-controllable-state";import{useCallbackRef as t}from"@radix-ui/react-use-callback-ref";import{Primitive as r}from"@radix-ui/react-primitive";import{useId as o}from"@radix-ui/react-id";import{createContext as n}from"@radix-ui/react-context";import{useComposedRefs as i}from"@radix-ui/react-compose-refs";import{createCollection as a}from"@radix-ui/react-collection";import{composeEventHandlers as c}from"@radix-ui/primitive";import*as u from"react";import s from"@babel/runtime/helpers/esm/extends";const f={bubbles:!1,cancelable:!0},[l,m,p,d]=a(),v="span",[g,w]=n("RovingFocusGroup");export const RovingFocusGroup=/*#__PURE__*/u.forwardRef(((e,t)=>/*#__PURE__*/u.createElement(l,null,/*#__PURE__*/u.createElement(m,null,/*#__PURE__*/u.createElement(b,s({},e,{ref:t}))))));/*#__PURE__*/const b=/*#__PURE__*/u.forwardRef(((o,n)=>{const{as:a=v,orientation:l,dir:m="ltr",loop:p=!1,currentTabStopId:w,defaultCurrentTabStopId:b,onCurrentTabStopIdChange:x,onEntryFocus:F,...I}=o,R=u.useRef(null),h=i(n,R),[T=null,A]=e({prop:w,defaultProp:b,onChange:x}),[y,D]=u.useState(!1),S=t(F),{getItems:C}=d(),G=u.useRef(!1);return u.useEffect((()=>{const e=R.current;if(e)return e.addEventListener("rovingFocusGroup.onEntryFocus",S),()=>e.removeEventListener("rovingFocusGroup.onEntryFocus",S)}),[S]),/*#__PURE__*/u.createElement(g,{orientation:l,dir:m,loop:p,currentTabStopId:T,onItemFocus:u.useCallback((e=>A(e)),[A]),onItemShiftTab:u.useCallback((()=>D(!0)),[])},/*#__PURE__*/u.createElement(r,s({tabIndex:y?-1:0,"aria-orientation":l,"data-orientation":l},I,{as:a,ref:h,style:{outline:"none",...o.style},onMouseDown:c(o.onMouseDown,(()=>{G.current=!0})),onFocus:c(o.onFocus,(e=>{const t=!G.current;if(e.target===e.currentTarget&&t&&!y){const t=new Event("rovingFocusGroup.onEntryFocus",f);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=C().filter((e=>e.focusable));E([e.find((e=>e.active)),e.find((e=>e.id===T)),...e].filter(Boolean).map((e=>e.ref.current)))}}G.current=!1})),onBlur:c(o.onBlur,(()=>D(!1)))})))})),x="span";export const RovingFocusItem=/*#__PURE__*/u.forwardRef(((e,t)=>{const{as:n=x,focusable:i=!0,active:a=!1,...f}=e,l=o(),m=w("RovingFocusItem"),v=m.currentTabStopId===l,{getItems:g}=d();/*#__PURE__*/return u.createElement(p,{id:l,focusable:i,active:a},/*#__PURE__*/u.createElement(r,s({tabIndex:v?0:-1,"data-orientation":m.orientation},f,{as:n,ref:t,onMouseDown:c(e.onMouseDown,(e=>{i?m.onItemFocus(l):e.preventDefault()})),onFocus:c(e.onFocus,(()=>m.onItemFocus(l))),onKeyDown:c(e.onKeyDown,(e=>{if("Tab"===e.key&&e.shiftKey)return void m.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,r){const o=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,r);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(o)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(o)?void 0:F[o]}(e,m.orientation,m.dir);if(void 0!==t){e.preventDefault();let n=g().filter((e=>e.focusable)).map((e=>e.ref.current));if("last"===t)n.reverse();else if("prev"===t||"next"===t){"prev"===t&&n.reverse();const i=n.indexOf(e.currentTarget);n=m.loop?(o=i+1,(r=n).map(((e,t)=>r[(o+t)%r.length]))):n.slice(i+1)}setTimeout((()=>E(n)))}var r,o}))})))}));/*#__PURE__*/const F={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function E(e){const t=document.activeElement;for(const r of e){if(r===t)return;if(r.focus(),document.activeElement!==t)return}}export const Root=RovingFocusGroup;export const Item=RovingFocusItem;
//# sourceMappingURL=index.module.js.map
