import{useLayoutEffect as e}from"@radix-ui/react-use-layout-effect";import{useComposedRefs as n}from"@radix-ui/react-compose-refs";import*as t from"react";export const Presence=u=>{const{present:o,children:i}=u,s=function(n){const[u,o]=t.useState(),i=t.useRef({}),s=t.useRef(n),a=t.useRef(),c=n?"mounted":"unmounted",[d,m]=function(e,n){return t.useReducer(((e,t)=>{const r=n[e][t];return null!=r?r:e}),e)}(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return e((()=>{const e=i.current,t=s.current;if(t!==n){const u=a.current,o=r(e);if(n)m("MOUNT");else if("none"===o||"none"===(null==e?void 0:e.display))m("UNMOUNT");else{const e=u!==o;m(t&&e?"ANIMATION_OUT":"UNMOUNT")}s.current=n}}),[n,m]),e((()=>{if(u){const e=e=>{const n=r(i.current).includes(e.animationName);e.target===u&&n&&m("ANIMATION_END")},n=e=>{e.target===u&&(a.current=r(i.current))};return u.addEventListener("animationstart",n),u.addEventListener("animationcancel",e),u.addEventListener("animationend",e),()=>{u.removeEventListener("animationstart",n),u.removeEventListener("animationcancel",e),u.removeEventListener("animationend",e)}}}),[u,m]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:t.useCallback((e=>{e&&(i.current=getComputedStyle(e),o(e))}),[])}}(o),a="function"==typeof i?i({present:s.isPresent}):t.Children.only(i),c=n(s.ref,a.ref);return"function"==typeof i||s.isPresent?/*#__PURE__*/t.cloneElement(a,{ref:c}):null};function r(e){return(null==e?void 0:e.animationName)||"none"}Presence.displayName="Presence";
//# sourceMappingURL=index.module.js.map
